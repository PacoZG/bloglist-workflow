(this.webpackJsonpbloglist=this.webpackJsonpbloglist||[]).push([[0],{73:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n(25),s=n.n(a),i=n(13),o=n(16),u=n(12),j=(n(73),n(129)),l=n(1),d=function(){var e=Object(i.c)((function(e){return e.notification}));console.log("NOTIFICATION INSIDE COMPONENT:",e);var t=e.message;return null===t?null:Object(l.jsx)("div",{className:"container",children:t&&Object(l.jsx)(j.a,{severity:"success",children:t})})},b=n(14),O=n(4),h=n.n(O),p=n(10),x=n(130),f=n(131),m=n(29),v=function(e){var t=Object(c.useState)(""),n=Object(m.a)(t,2),r=n[0],a=n[1];return{param:{type:e,value:r,onChange:function(e){a(e.target.value)}},reset:function(){a("")}}},g=function(e){localStorage.setItem("loggedBlogUser",JSON.stringify(e))},y=function(){return JSON.parse(localStorage.getItem("loggedBlogUser"))},w=function(){localStorage.removeItem("loggedBlogUser"),localStorage.clear()},k=function(e){return function(){var t=Object(p.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g(e),console.log("USER TOKEN",e.token),n({type:"LOGIN",data:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null;default:return e}},N=function(e,t){return function(){var n=Object(p.a)(h.a.mark((function n(c){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c({type:"SET_NOTIFICATION",data:{message:e,color:t}}),r&&clearTimeout(r),r=setTimeout((function(){c({type:"CLEAR_NOTIFICATION"})}),1e4);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.data;case"CLEAR_NOTIFICATION":return[];default:return e}},C=n(23),E=n.n(C),S={login:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(){var e=Object(i.b)(),t=Object(u.f)(),n=v("usarname"),r=v("password"),c={username:n.param.value,password:r.param.value},a=function(){var n=Object(p.a)(h.a.mark((function n(r){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,n.next=4,S.login(c);case 4:a=n.sent,e(k(a)),e(N("logged in, welcome back ".concat(a.name),"success")),t.push("/blogs"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),e(N("wrong username or password","error"));case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}();return Object(l.jsx)("div",{children:Object(l.jsxs)(x.a,{onSubmit:a,children:[Object(l.jsxs)(x.a.Group,{children:[Object(l.jsx)(x.a.Label,{children:"username:"}),Object(l.jsx)(x.a.Control,Object(b.a)({id:"username",name:"Username"},n.param)),Object(l.jsx)(x.a.Label,{children:"password:"}),Object(l.jsx)(x.a.Control,Object(b.a)({id:"password",name:"Password",type:"password"},r.param))]}),Object(l.jsx)(f.a,{variant:"primary",id:"login-button",type:"submit",children:"login"})]})})},B=n(122),A=function(e){var t=e.createBlog,n=Object(c.useState)(!1),r=Object(m.a)(n,2),a=r[0],s=r[1],i={display:a?"none":""},o={display:a?"":"none"},u=v("title"),j=v("author"),d=v("url"),O=function(){var e=Object(p.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t({url:d.param.value,title:u.param.value,author:j.param.value}),u.reset(),j.reset(),d.reset();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)("div",{className:"container",children:Object(l.jsx)(x.a,{onSubmit:O,children:Object(l.jsxs)(B.a,{striped:!0,children:[Object(l.jsx)("tbody",{style:i,children:Object(l.jsx)("tr",{children:Object(l.jsx)("td",{children:Object(l.jsx)(f.a,{id:"newblog-button",variant:"primary",onClick:function(){return s(!a)},children:"new blog"})})})}),Object(l.jsxs)("tbody",{style:o,children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)(x.a.Label,{children:"title:"})}),Object(l.jsx)("td",{children:Object(l.jsx)(x.a.Control,Object(b.a)({id:"title",name:"Title"},u.param))})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)(x.a.Label,{children:"author:"})}),Object(l.jsx)("td",{children:Object(l.jsx)(x.a.Control,Object(b.a)({id:"author",name:"Author"},j.param))}),Object(l.jsx)("th",{})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)(x.a.Label,{children:"url:"})}),Object(l.jsx)("td",{children:Object(l.jsx)(x.a.Control,Object(b.a)({id:"url",name:"url",placeholder:"http://example.com",pattern:"http://.*"},d.param))})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)(f.a,{id:"create-button",variant:"primary",type:"submit",children:"create"})}),Object(l.jsx)("td",{children:Object(l.jsx)(f.a,{id:"cancel-button",variant:"primary",onClick:function(){return s(!a)},children:"cancel"})})]})]})]})})})},G=function(){var e=Object(i.c)((function(e){return e.blogs})).sort((function(e,t){return t.likes-e.likes}));return Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)(B.a,{striped:!0,bordered:!0,hover:!0,children:[Object(l.jsx)("h1",{children:"Blogs"}),Object(l.jsx)("tbody",{children:e.map((function(e){return Object(l.jsx)("tr",{children:Object(l.jsx)("td",{children:Object(l.jsx)(o.b,{to:"/blogs/".concat(e.id),children:"".concat(e.title," by ").concat(e.user.name)})})},e.id)}))})]})})},U=function(){var e=y(),t=Object(i.b)(),n=Object(u.f)(),r=function(){var r=Object(p.a)(h.a.mark((function r(){return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t(N("logged out, see next time ".concat(e.name),"error")),r.next=3,t(function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(),t({type:"LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:n.push("/about");case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),c={paddingRight:5};return Object(l.jsx)("div",{children:e?Object(l.jsxs)("div",{children:[Object(l.jsx)(o.b,{style:c,to:"/about",children:"Home"}),Object(l.jsx)(o.b,{style:c,to:"/blogs",children:"Blogs"}),Object(l.jsx)(o.b,{style:c,to:"/users",children:"Users"}),Object(l.jsxs)("em",{children:[Object(l.jsx)("b",{children:"".concat(e.name," has logged in ")}),Object(l.jsx)(f.a,{id:"logout-button",variant:"primary",type:"submit",onClick:r,children:"logout"})]})]}):Object(l.jsxs)("div",{children:[Object(l.jsx)(o.b,{style:c,to:"/about",children:"Home"}),Object(l.jsx)(o.b,{style:c,to:"/login",children:"login"})]})})},R=function(){var e=Object(i.c)((function(e){return e.users}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Users"}),Object(l.jsxs)(B.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"User Name"}),Object(l.jsxs)("th",{children:[" ","Blogs created"," "]})]})}),Object(l.jsx)("tbody",{children:e.map((function(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{className:"blog",children:Object(l.jsx)(o.b,{to:"/users/".concat(e.id),children:e.name})}),Object(l.jsx)("th",{children:e.blogs.length})]},e.id)}))})]})]})},_=function(){var e=Object(u.g)().id,t=Object(i.c)((function(t){return t.users.find((function(t){return t.id===e}))}));return Object(l.jsx)("div",{children:t?Object(l.jsxs)("div",{className:"blog",children:[Object(l.jsx)("h2",{children:t.name}),Object(l.jsx)("b",{children:"Added blogs"}),Object(l.jsx)("ul",{children:t.blogs.map((function(e){return Object(l.jsx)("li",{children:Object(l.jsx)(o.b,{to:"/blogs/".concat(e.id),children:e.title})},e.id)}))})]}):null})},D=function(){return Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("h1",{children:"Welcome to my very first web routed deployed application"}),Object(l.jsx)("h2",{children:"Blogs application for part 7 from Fullstack 2020 course"}),Object(l.jsxs)("em",{children:["This application is a very challenging and time taking task, but at the same time it is very educational."," It introduces you to the real world of web application developemt, using router and the handy Redux package"]}),Object(l.jsxs)("p",{children:["For more information about me please visit my ",Object(l.jsx)("a",{href:"https://github.com/PacoZG",children:"GitHub"}),". and  ",Object(l.jsx)("a",{href:"https://www.linkedin.com/in/francisco-zavala/",children:"LinkedIn"})," pages."]})]})},M="/api/blogs",F=function(){return{headers:{Authorization:"bearer ".concat(y().token)}}},J={getAll:function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(M);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post(M,t,F());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.put("".concat(M,"/").concat(t.id),t,F());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.delete("".concat(M,"/").concat(t),F());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addComment:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(M,"/").concat(t.id,"/comments"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("BLOGS STATE IN BLOGREDUCER:",e),console.log("BLOGS ACTION.TYPE IN BLOGREDUCER:",t),t.type){case"INIT_BLOGS":return t.data;case"NEW_BLOG":return e.concat(t.data);case"LIKE":var n=t.data.id,r=e.find((function(e){return e.id===n})),c=Object(b.a)(Object(b.a)({},r),{},{likes:r.likes+1});return e.map((function(e){return e.id!==n?e:c}));case"DELETE":return e.filter((function(e){return e.id!==t.data}));case"COMMENT":console.log("ACTION DATA inside COMMET:",t.data);var a=t.data.id,s=e.find((function(e){return e.id===a})),i=Object(b.a)(Object(b.a)({},s),{},{comments:t.data.comments});return e.map((function(e){return e.id!==a?e:i}));default:return e}},W=n(124),H=n(128),K=n(127),z=n(123),Y=n(125),Z=n(126),q=n(121),Q=function(){var e=Object(u.g)().id,t=Object(i.c)((function(t){return t.blogs.find((function(t){return t.id===e}))})),n=Object(i.c)((function(e){return e.user})),r=Object(i.b)(),a=Object(c.useState)(!0),s=Object(m.a)(a,2),o=s[0],j=s[1],d={display:o?"none":""},O=function(){var e=document.getElementById("textarea").value;if(""!==e){var n=Object(b.a)(Object(b.a)({},t),{},{comments:t.comments.concat(e)});j(!o),r(function(e){return function(){var t=Object(p.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.addComment(e);case 2:r=t.sent,n({type:"COMMENT",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(n))}};return Object(l.jsxs)("div",{children:[t?Object(l.jsx)(z.a,{component:q.a,children:Object(l.jsxs)(W.a,{children:[Object(l.jsx)(Y.a,{children:Object(l.jsx)(Z.a,{children:Object(l.jsx)(K.a,{align:"center",colSpan:"2",children:Object(l.jsxs)("b",{children:[t.title,", by "," ",t.author]})})})}),Object(l.jsxs)(H.a,{children:[Object(l.jsx)(Z.a,{children:Object(l.jsxs)(K.a,{colSpan:"2",children:["URL: ",Object(l.jsx)("a",{href:"".concat(t.url),children:"".concat(t.url)}),", for more info"]})}),Object(l.jsxs)(Z.a,{children:[Object(l.jsxs)(K.a,{children:[t.likes," likes"]}),Object(l.jsx)(K.a,{children:Object(l.jsxs)(f.a,{id:"like-button",variant:"primary",onClick:function(){r(function(e){var t=Object(b.a)(Object(b.a)({},e),{},{likes:e.likes+1});return function(){var e=Object(p.a)(h.a.mark((function e(n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.update(t);case 2:r=e.sent,n({type:"LIKE",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t)),r(N('You liked "'.concat(t.title,'"'),"success"))},children:["like"," "]})})]})]}),Object(l.jsxs)(Z.a,{children:[Object(l.jsx)(K.a,{children:Object(l.jsx)("b",{children:"Added by ".concat(t.author)})}),t&&t.user.id===n.id?Object(l.jsx)(K.a,{children:Object(l.jsxs)(f.a,{id:"delete-button",variant:"primary",onClick:function(){window.confirm("Remove blog ".concat(t.title," by ").concat(t.author))&&(r(function(e){return function(){var t=Object(p.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.remove(e.id);case 2:n({type:"DELETE",data:e.id});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t)),r(N("Blog has been deleted!","success")))},children:["delete"," "]})}):null]})]})}):null,Object(l.jsx)("div",{children:t?Object(l.jsx)(z.a,{component:q.a,children:Object(l.jsxs)(W.a,{children:[Object(l.jsx)(Y.a,{children:Object(l.jsx)(Z.a,{children:Object(l.jsx)(K.a,{children:Object(l.jsx)("b",{children:"Comments"})})})}),Object(l.jsx)(H.a,{children:t.comments.map((function(e,t){return Object(l.jsx)(Z.a,{children:Object(l.jsxs)(K.a,{children:[Object(l.jsx)("li",{children:e})," "]})},t)}))})]})}):null}),Object(l.jsx)("textarea",{style:d,id:"textarea",className:"textarea",placeholder:"Make a comment"}),o?Object(l.jsx)("div",{children:Object(l.jsx)(z.a,{component:q.a,children:Object(l.jsx)(W.a,{children:Object(l.jsx)(H.a,{children:Object(l.jsx)(Z.a,{children:Object(l.jsx)(K.a,{children:Object(l.jsx)(f.a,{variant:"primary",onClick:function(){return j(!o)},children:"Comment"})})})})})})}):Object(l.jsx)("div",{children:Object(l.jsx)(z.a,{component:q.a,children:Object(l.jsx)(W.a,{children:Object(l.jsx)(H.a,{children:Object(l.jsxs)(Z.a,{children:[Object(l.jsx)(K.a,{children:Object(l.jsx)(f.a,{variant:"primary",type:"submit",onClick:function(){O()},children:"Submit"})}),Object(l.jsx)(K.a,{children:Object(l.jsx)(f.a,{variant:"primary",type:"submit",onClick:function(){return j(!o)},children:"Cancel"})})]})})})})})]})},V=function(){return E.a.get("/api/users").then((function(e){return e.data}))},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;default:return e}},$=function(){var e=Object(i.b)();Object(c.useEffect)((function(){e(function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.getAll();case 2:n=e.sent,t({type:"INIT_BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:n=e.sent,t({type:"INIT_USERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]);var t=Object(i.c)((function(e){return e.user}));return Object(l.jsx)("div",{className:"container",children:t?Object(l.jsxs)(o.a,{children:[Object(l.jsx)(d,{}),Object(l.jsx)(U,{}),Object(l.jsxs)(u.c,{children:[Object(l.jsx)(u.a,{path:"/blogs/:id",children:Object(l.jsx)(Q,{})}),Object(l.jsx)(u.a,{path:"/users/:id",children:Object(l.jsx)(_,{})}),Object(l.jsxs)(u.a,{path:"/blogs",children:[Object(l.jsx)(A,{createBlog:function(t){var n;e((n=t,function(){var e=Object(p.a)(h.a.mark((function e(t){var r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.create(n);case 2:r=e.sent,c=Object(b.a)(Object(b.a)({},r),{},{user:y()}),t({type:"NEW_BLOG",data:c});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e(N("a new blog posted: ".concat(t.title," by ").concat(t.author),"success"))}}),Object(l.jsx)(G,{})]}),Object(l.jsx)(u.a,{path:"/users",children:Object(l.jsx)(R,{})}),Object(l.jsx)(u.a,{path:"/",children:Object(l.jsx)(D,{})})]})]}):Object(l.jsxs)(o.a,{children:[Object(l.jsx)(d,{}),Object(l.jsx)(U,{}),Object(l.jsxs)(u.c,{children:[Object(l.jsx)(u.a,{path:"/about",children:Object(l.jsx)(D,{})}),Object(l.jsx)(u.a,{path:"/login",children:Object(l.jsx)(L,{})}),Object(l.jsx)(u.a,{path:"/",children:Object(l.jsx)(D,{})})]})]})})},ee=n(28),te=n(58),ne=n(59),re=Object(ee.combineReducers)({users:X,blogs:P,notification:T,user:I}),ce=Object(ee.createStore)(re,Object(ne.composeWithDevTools)(Object(ee.applyMiddleware)(te.a)));s.a.render(Object(l.jsx)(i.a,{store:ce,children:Object(l.jsx)($,{})}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.48616846.chunk.js.map